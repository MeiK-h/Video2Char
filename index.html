<html>

<head>
  <script src="/js/gifshot.min.js"></script>
  <script src="/js/libgif.min.js"></script>
</head>

<body>
  <input type="file" onchange="previewFile()">
  <video id="video" controls></video>
</body>

<script>
  function previewFile() {
    var file = document.querySelector('input[type=file]').files[0];
    var video = document.getElementById("video");
    video.src = window.URL.createObjectURL(file);
    video.addEventListener("loadedmetadata", function (e) {
      var width = this.videoWidth,
        height = this.videoHeight;
        console.log(width);
        console.log(height);
        console.log(this.duration.toFixed(1));
    }, false);
  }
  /*
  var rub;
  var cmd = {
    "windows": "start",
    "darwin": "open",
    "linux": "xdg-open",
  };
  gifshot.createGIF({
    gifWidth: 200,
    gifHeight: 200,
    video: [
      'example/example.mp4',
    ],
    interval: 0.1,
    numFrames: 100,
    frameDuration: 1,
    fontWeight: 'normal',
    fontSize: '16px',
    fontFamily: 'sans-serif',
    fontColor: '#ffffff',
    textAlign: 'center',
    textBaseline: 'bottom',
    sampleInterval: 10,
    filter: 'grayscale(1)',
    saveRenderingContexts: true,
    numWorkers: 2,
    progressCallback: (captureProgress) => {
      console.log(captureProgress);
    }
  }, function (obj) {
    if (!obj.error) {
      delete obj.image;
      for (const image of obj.savedRenderingContexts) {
        var canvas = document.createElement("canvas");
        canvas.width = 200;
        canvas.height = 200;
        var ctx = canvas.getContext("2d");
        ctx.putImageData(image, 0, 0);

        var img = document.createElement("img");
        img.src = canvas.toDataURL("image/png");
        document.body.appendChild(img);
      }
    }
  });
  */
</script>

</html>